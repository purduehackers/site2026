---
import BaseLayout from '../layouts/BaseLayout.astro';
import PT from '../components/PT';
import Glider from '../components/GliderShader.astro';
import { getHeroDitherSvg, getFooterDitherSvg, getPixelIndices } from '../utils/dither';

const ditherSvg = getHeroDitherSvg();
const footerDitherSvg = getFooterDitherSvg();
const pixelIndices = getPixelIndices();
const ENABLE_PIXEL_CURSOR = true;
const shouldEnablePixelCursor =
  typeof window !== "undefined" &&
  !window.matchMedia("(prefers-reduced-motion: reduce)").matches || ENABLE_PIXEL_CURSOR;
---

<BaseLayout>
	{shouldEnablePixelCursor && (
		<div
		  id="pixel-trail-container"
		  style="position: fixed; inset: 0; z-index: 10; pointer-events: none;"
		>
		  <PT
			client:load
			gridSize={85}
			trailSize={0.05}
			maxAge={150}
			interpolate={5}
			gooeyFilter={{ id: "custom-goo-filter", strength: 0 }}
		  />
		</div>
	  )}
	<main>
		<section class="relative min-h-[90vh] flex items-center md:items-center gap-16 px-4 pt-40 sm:px-10 md:px-40 md:pt-20 overflow-hidden" style="background-color: var(--color-bg);">
			<div class="flex flex-col gap-6">
				<img
					src="/title.svg"
					alt="Purdue Hackers"
					class="w-full max-w-2xl h-auto object-contain object-left shrink-0 noselect pb-6"
				/>
				<p class="max-w-[36rem] font-inconsolata uppercase sm:text-lg md:text-xl font-semibold leading-relaxed mb-6">
					A collective of 
					<span class="text-[var(--color-accent-2)]">hobbyists</span>, 
					<span class="text-[var(--color-primary)]">engineers</span>, and 
					<span class="text-[var(--color-accent)]">artists</span> 
					who make creative-technical software, hardware, and mixed media projects
				</p>
				<a
					href="https://luma.com/user/purduehackers"
					class="join-session-btn"
				>
					<span class="join-session-btn__pixels" aria-hidden="true">
						{pixelIndices.map((delayIndex) => (
							<span class="join-session-btn__pixel" style={`--i: ${delayIndex}`} />
						))}
					</span>
					<span class="join-session-btn__label pointer-events-none text-[var(--color-bg)]">build with us</span>
				</a>
			</div>
			<Glider gridCols={80} gridRows={100} cellSize={10} speedMs={100} class="glider shrink-0 absolute top-[25%] -translate-y-1/4 -left-10 md:top-1/4 md:translate-y-0 md:-right-20 md:left-auto" />
		</section>

		<section
			class="h-[256px] w-full shrink-0"
			style={`background-color: var(--color-bg); background-image: url('${ditherSvg}'); background-size: 8px 256px; background-repeat: repeat-x; image-rendering: pixelated; image-rendering: crisp-edges;`}
			aria-hidden="true"
		/>
		<section data-header-dark class="relative min-h-screen flex flex-col items-center pt-72 px-8 py-16 bg-black text-[var(--color-bg)] text-center overflow-hidden">
			<!-- creatura! -->
			<img
				src="/angry_man-clear.png"
				alt=""
				class="absolute image-rendering-pixelated top-12 -right-8 md:right-8 lg:right-12 w-40 h-auto md:w-56 lg:w-72 object-contain pointer-events-none"
				aria-hidden="true"
			/>
			<img
				src="/fish_with_legs.png"
				alt=""
				class="absolute image-rendering-pixelated -left-12 md:left-8 lg:left-12 top-1/3 md:top-1/2 lg:top-1/2 -translate-y-1/2 w-40 h-auto md:w-56 lg:w-72 object-contain pointer-events-none"
				aria-hidden="true"
			/>
			<img
				src="/lizard_gun.png"
				alt=""
				class="absolute image-rendering-pixelated bottom-1/3 md:bottom-12 lg:bottom-12 -right-12 md:right-8 lg:right-12 w-40 h-auto md:w-56 lg:w-72 object-contain pointer-events-none"
				aria-hidden="true"
			/>

			<!-- 1 -->
			<div class="mb-72 relative z-10">	  
			  <img src="/ph.svg" alt="Purdue Hackers" class="w-6 h-6 mb-6 mx-auto fill-[var(--color-secondary)]" />
			  <p class="max-w-[36rem] font-inconsolata text-lg uppercase leading-relaxed mt-6">
				Making something you're proud of is incredibly rewarding. But it's really hard to do alone. Since 2013, Purdue Hackers has been a home to build, ship, and demo creative-technical projects together. We'd love to see you here.
			  </p>
			</div>
			
			<!-- 2 -->
			<div id="hack-night" class="mb-72 relative">
				<svg
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 24 24"
				class="w-6 h-6 mb-6 mx-auto text-[var(--color-secondary)]"
				fill="currentColor">
				<polygon points="22 17 22 19 21 19 21 20 20 20 20 21 18 21 18 22 16 22 16 23 10 23 10 22 8 22 8 21 6 21 6 20 5 20 5 19 4 19 4 17 3 17 3 15 2 15 2 9 3 9 3 7 4 7 4 5 5 5 5 4 6 4 6 3 8 3 8 2 10 2 10 1 15 1 15 2 13 2 13 3 11 3 11 4 10 4 10 6 9 6 9 8 8 8 8 12 9 12 9 14 10 14 10 16 11 16 11 17 13 17 13 18 15 18 15 19 19 19 19 18 21 18 21 17 22 17" />
			  	</svg>
			  
			  <p class="max-w-[36rem] font-whyte text-l leading-relaxed">
				Hack night happens <span class="highlight">every Friday night at 8pm</span>, second floor of <a href="https://www.purdue.edu/bidc/" class="highlight hover:text-[var(--color-secondary)] underline transition-colors duration-300">the Bechtel Center</a>. We make custom acrylic badges each week, run workshops, and share everything on <a href="https://discord.gg/ncJ3xmhV85" class="highlight hover:text-[var(--color-secondary)] underline transition-colors duration-300">Discord</a>. Ends when the last person leaves (often until 6am or later). You're invited, so pull up!
			  </p>
			  <br />
			  <p class="max-w-[36rem] font-whyte text-l leading-relaxed mb-4">
				A typical Hack Night schedule looks something like this:
			  </p>
			  <table class="font-inconsolata text-xl mx-auto">
				<tbody>
				  <tr>
					<td class="highlight pr-4 py-1">D~5~5|5 (8:00pm):</td>
					<td class="py-1 uppercase">Hacking begins</td>
				  </tr>
				  <tr>
					<td class="highlight pr-4 py-1">E~0~0|0 (9:00pm):</td>
					<td class="py-1 uppercase">Session 1</td>
				  </tr>
				  <tr>
					<td class="highlight pr-4 py-1">E~A~A|A (10:00pm):</td>
					<td class="py-1 uppercase">Session 2</td>
				  </tr>
				  <tr>
					<td class="highlight pr-4 py-1">0~0~0 (12:00am):</td>
					<td class="py-1 uppercase">Checkpoints</td>
				  </tr>
				</tbody>
			  </table>
			</div>

			<!-- 3 -->
			<div class="mb-72 relative z-10">
				<svg
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 24 24"
				class="w-6 h-6 mb-6 mx-auto text-[var(--color-secondary)]"
				fill="currentColor">
				<polygon points="23 18 23 20 21 20 21 21 20 21 20 23 18 23 18 21 17 21 17 20 15 20 15 18 17 18 17 17 18 17 18 15 20 15 20 17 21 17 21 18 23 18"/><polygon points="23 4 23 6 21 6 21 7 20 7 20 9 18 9 18 7 17 7 17 6 15 6 15 4 17 4 17 3 18 3 18 1 20 1 20 3 21 3 21 4 23 4"/><polygon points="17 11 17 13 15 13 15 14 13 14 13 15 12 15 12 16 11 16 11 18 10 18 10 20 8 20 8 18 7 18 7 16 6 16 6 15 5 15 5 14 3 14 3 13 1 13 1 11 3 11 3 10 5 10 5 9 6 9 6 8 7 8 7 6 8 6 8 4 10 4 10 6 11 6 11 8 12 8 12 9 13 9 13 10 15 10 15 11 17 11"/></svg>
				<p class="max-w-[36rem] font-whyte text-l leading-relaxed">
				At the end-of-semester, we hold a show where our community comes together to share projects made throughout the semester at Hack Night and beyond.
				</p>
				<br />
				<p class="font-inconsolata text-xl font-semibold uppercase">???: Fall 2026 Show</p>
				<a href="https://spill.purduehackers.com/" class="font-inconsolata text-xl font-semibold uppercase underline hover:text-[var(--color-secondary)] transition-colors duration-300">Spill: Fall 2025 Show</a>
				<br />
				<a href="https://burst.purduehackers.com/" class="font-inconsolata text-xl font-semibold uppercase underline hover:text-[var(--color-secondary)] transition-colors duration-300">Burst: Fall 2024 Show</a>
			</div>

		  </section>

		<section
			class="relative min-h-screen w-full bg-cover bg-center bg-no-repeat flex flex-col justify-end"
			style="background-image: url('/pic.png'); image-rendering: pixelated;"
		>
			<div
				class="absolute top-0 left-0 right-0 h-[256px] pointer-events-none"
				style={`background-image: url('${footerDitherSvg}'); background-size: 8px 256px; background-repeat: repeat-x; image-rendering: pixelated; image-rendering: crisp-edges;`}
				aria-hidden="true"
			/>
			<div class="absolute inset-0 z-[1] w-full h-full" aria-hidden="true">
				<div id="pixel-blast-root" class="w-full h-full" aria-label="PixelBlast interactive dither overlay"></div>
			</div>
			<div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent pointer-events-none" aria-hidden="true" />
			<div class="relative z-10 flex flex-wrap items-end justify-between gap-8 px-8 py-8 md:px-12 md:py-12 pointer-events-none">
				<div class="font-inconsolata text-[var(--color-bg)] text-left">
					<p class="text-sm md:text-base uppercase tracking-wide opacity-90">2026</p>
				</div>
				<div class="flex gap-12 md:gap-16 font-inconsolata text-[var(--color-bg)]">
					<div class="text-right">
						<p class="text-sm md:text-base uppercase tracking-wide opacity-90 text-[var(--color-bg)]">more from us</p>
						<p class="mt-2 text-lg md:text-xl text-[var(--color-bg)]">
							<a href="https://sig.horse/" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">SIGHORSE</a>
							<br />
							<a href="https://passports.purduehackers.com/" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">Passports</a>
							<br />
							<a href="https://shelter.purduehackers.com/" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">Shelter</a>
							<br />
							<a href="https://commit.purduehackers.com/" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">Commit Overflow</a>
							<br />
							<a href="https://ring.purduehackers.com/" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">Webring</a>
						</p>
					</div>
					<div class="text-right">
						<p class="text-sm md:text-base uppercase tracking-wide opacity-90 text-[var(--color-bg)]">find us on</p>
						<p class="mt-2 text-lg md:text-xl text-[var(--color-bg)]">
							<a href="https://discord.gg/purduehackers" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">Discord</a>
							<br />
							<a href="https://github.com/purduehackers" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">GitHub</a>
							<br />
							<a href="https://www.instagram.com/purduehackers/" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">Instagram</a>
							<br />
							<a href="https://www.linkedin.com/company/purdue-hackers/" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">LinkedIn</a>
							<br />
							<a href="https://x.com/purduehackers/" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">Twitter</a>
							<br />
							<a href="https://www.youtube.com/@PurdueHackers/" class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold">Youtube</a>
						</p>
					</div>
				</div>
			</div>
		</section>
	</main>
	<script>
		import { initPixelBlast } from '../scripts/PixelBlast';
		function init() {
			const root = document.getElementById('pixel-blast-root');
			if (root) {
				const cleanup = initPixelBlast(root, {
					variant: 'square',
					pixelSize: 2,
					color: '#000000',
					patternScale: 2.5,
					patternDensity: 1.5,
					pixelSizeJitter: 0,
					enableRipples: true,
					rippleSpeed: 0.3,
					rippleThickness: 0.15,
					rippleIntensityScale: 2,
					liquid: false,
					liquidStrength: 0.12,
					liquidRadius: 1.2,
					liquidWobbleSpeed: 5,
					speed: 0.5,
					edgeFade: 0,
					transparent: true,
				});
				document.addEventListener('astro:before-swap', cleanup, { once: true });
			}
		}
		if (document.readyState === 'loading') {
			document.addEventListener('DOMContentLoaded', init);
		} else {
			init();
		}
	</script>
</BaseLayout>
