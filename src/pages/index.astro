---
import BaseLayout from '../layouts/BaseLayout.astro';
import PT from '../components/PT';
import Glider from '../components/GliderShader.astro';
import {
  getHeroDitherSvg,
  getFooterDitherSvg,
  getPixelIndices,
} from '../utils/dither';

const ditherSvg = getHeroDitherSvg();
const footerDitherSvg = getFooterDitherSvg();
const pixelIndices = getPixelIndices();
const ENABLE_PIXEL_CURSOR = true;
const shouldEnablePixelCursor =
  (typeof window !== 'undefined' &&
    !window.matchMedia('(prefers-reduced-motion: reduce)').matches) ||
  ENABLE_PIXEL_CURSOR;
---

<BaseLayout>
  {
    shouldEnablePixelCursor && (
      <div
        id="pixel-trail-container"
        style="position: fixed; inset: 0; z-index: 10; pointer-events: none;"
      >
        <PT
          client:load
          gridSize={85}
          trailSize={0.05}
          maxAge={150}
          interpolate={5}
          gooeyFilter={{ id: 'custom-goo-filter', strength: 0 }}
        />
      </div>
    )
  }
  <main>
    <section
      class="relative min-h-[90vh] flex items-center md:items-center gap-16 px-4 pt-40 sm:px-10 md:px-40 md:pt-20 overflow-hidden"
      style="background-color: var(--color-bg);"
    >
      <div class="flex flex-col gap-6">
        <img
          src="/title.svg"
          alt="Purdue Hackers"
          class="w-full max-w-2xl h-auto object-contain object-left shrink-0 noselect pb-6"
        />
        <p
          class="max-w-[36rem] font-inconsolata uppercase sm:text-lg md:text-xl font-semibold leading-relaxed mb-6"
        >
          A collective of
          <span class="text-[var(--color-accent-2)]">hobbyists</span>,
          <span class="text-[var(--color-primary)]">engineers</span>, and
          <span class="text-[var(--color-accent)]">artists</span>
          who make creative-technical software, hardware, and mixed media projects
        </p>
        <a
          href="https://luma.com/user/purduehackers"
          target="_blank"
          class="join-session-btn"
        >
          <span class="join-session-btn__pixels" aria-hidden="true">
            {
              pixelIndices.map((delayIndex) => (
                <span
                  class="join-session-btn__pixel"
                  style={`--i: ${delayIndex}`}
                />
              ))
            }
          </span>
          <span
            class="join-session-btn__label pointer-events-none text-[var(--color-bg)]"
            >build with us</span
          >
        </a>
      </div>
      <Glider
        gridCols={80}
        gridRows={100}
        cellSize={10}
        speedMs={100}
        class="glider shrink-0 absolute top-[25%] -translate-y-1/4 -left-10 md:top-1/4 md:translate-y-0 md:-right-20 md:left-auto"
      />
    </section>

    <section
      class="h-[256px] w-full shrink-0"
      style={`background-color: var(--color-bg); background-image: url('${ditherSvg}'); background-size: 8px 256px; background-repeat: repeat-x; image-rendering: pixelated; image-rendering: crisp-edges;`}
      aria-hidden="true"
    >
    </section>
    <section
      data-header-dark
      class="relative min-h-screen flex flex-col items-center pt-72 px-8 py-16 bg-black text-[var(--color-bg)] text-center overflow-hidden"
    >
      <!-- creatura! -->
      <img
        src="/angry_man-clear.png"
        alt=""
        class="absolute image-rendering-pixelated top-12 -right-8 md:right-8 lg:right-12 w-40 h-auto md:w-56 lg:w-72 object-contain pointer-events-none"
        aria-hidden="true"
      />
      <img
        src="/fish_with_legs.png"
        alt=""
        class="absolute image-rendering-pixelated -left-12 md:left-8 lg:left-12 top-1/3 md:top-1/2 lg:top-1/2 -translate-y-1/2 w-40 h-auto md:w-56 lg:w-72 object-contain pointer-events-none"
        aria-hidden="true"
      />
      <img
        src="/lizard_gun.png"
        alt=""
        class="absolute image-rendering-pixelated bottom-1/3 md:bottom-12 lg:bottom-12 -right-12 md:right-8 lg:right-12 w-40 h-auto md:w-56 lg:w-72 object-contain pointer-events-none"
        aria-hidden="true"
      />

      <!-- 1 -->
      <div class="mb-72 relative">
        <img
          src="/ph.svg"
          alt="Purdue Hackers"
          class="w-8 h-8 mb-6 mx-auto fill-[var(--color-secondary)]"
        />
        <p
          class="max-w-[36rem] font-inconsolata text-lg uppercase font-semibold leading-relaxed mt-6"
        >
          Making something you're proud of is incredibly rewarding. But it's
          really hard to do alone. Since 2013, Purdue Hackers has been a home to
          build, ship, and demo creative-technical projects together. Here's how
          we do it:
        </p>
      </div>

      <!-- 2 -->
      <div id="hack-night" class="mb-72 relative">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          class="w-8 h-8 mx-auto text-[var(--color-secondary)]"
          fill="currentColor"
        >
          <polygon
            points="22 17 22 19 21 19 21 20 20 20 20 21 18 21 18 22 16 22 16 23 10 23 10 22 8 22 8 21 6 21 6 20 5 20 5 19 4 19 4 17 3 17 3 15 2 15 2 9 3 9 3 7 4 7 4 5 5 5 5 4 6 4 6 3 8 3 8 2 10 2 10 1 15 1 15 2 13 2 13 3 11 3 11 4 10 4 10 6 9 6 9 8 8 8 8 12 9 12 9 14 10 14 10 16 11 16 11 17 13 17 13 18 15 18 15 19 19 19 19 18 21 18 21 17 22 17"
          ></polygon>
        </svg>
        <p
          class="max-w-[32rem] uppercase font-silkscreen text-6xl font-semibold leading-relaxed"
        >
          hack night
        </p>
        <p class="max-w-[32rem] font-whyte text-l leading-relaxed">
          Hack Night happens <span class="highlight"
            >every Friday night at 8pm</span
          >, second floor of <a
            href="https://www.purdue.edu/bidc/"
            target="_blank"
            class="highlight hover:text-[var(--color-secondary)] underline transition-colors duration-300 whitespace-nowrap"
            >the Bechtel Center</a
          >. It's a dedicated space to work on personal projects, join (or even
          run) workshops, and share your progress at Checkpoints or on <a
            href="https://discord.gg/ncJ3xmhV85"
            target="_blank"
            class="highlight hover:text-[var(--color-secondary)] underline transition-colors duration-300"
            >Discord</a
          >. Ends when the last person leaves (often until 6am or later).
        </p>
        <br />
        <p class="max-w-[36rem] font-whyte text-l leading-relaxed mb-4">
          A typical Hack Night schedule looks something like this:
        </p>
        <table class="font-inconsolata text-xl mx-auto">
          <tbody>
            <tr>
              <td class="highlight pr-4 py-1 text-right">D~5~5|5 (8:00pm):</td>
              <td class="py-1 uppercase">Hacking begins</td>
            </tr>
            <tr>
              <td class="highlight pr-4 py-1 text-right">E~0~0|0 (9:00pm):</td>
              <td class="py-1 uppercase">Session 1</td>
            </tr>
            <tr>
              <td class="highlight pr-4 py-1 text-right">E~A~A|A (10:00pm):</td>
              <td class="py-1 uppercase">Session 2</td>
            </tr>
            <tr>
              <td class="highlight pr-4 py-1 text-right">0~0~0 (12:00am):</td>
              <td class="py-1 uppercase">Checkpoints</td>
            </tr>
          </tbody>
        </table>
        <p class="max-w-[32rem] pt-6 font-whyte text-l leading-relaxed">
          If you go to Purdue - whether you've never written code before or are
          highly technical, whether you're an art major or a CS major - <br />
          <span class="highlight">you're invited.</span>
        </p>
      </div>

      <!-- 3 -->
      <div id="projects" class="mb-72 relative">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          class="w-8 h-8 mx-auto text-[var(--color-secondary)]"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
        <polygon points="3 17 4 17 4 18 3 18 3 20 1 20 1 17 2 17 2 16 3 16 3 17"/><polygon points="4 5 3 5 3 3 4 3 4 2 6 2 6 3 7 3 7 5 6 5 6 6 4 6 4 5"/><polygon points="23 17 23 20 21 20 21 18 20 18 20 17 21 17 21 16 22 16 22 17 23 17"/><polygon points="20 16 19 16 19 20 18 20 18 21 17 21 17 20 16 20 16 17 17 17 17 14 18 14 18 12 17 12 17 13 16 13 16 14 8 14 8 13 7 13 7 12 6 12 6 14 7 14 7 17 8 17 8 20 7 20 7 21 6 21 6 20 5 20 5 16 4 16 4 15 3 15 3 14 2 14 2 11 3 11 3 8 4 8 4 7 6 7 6 8 7 8 7 10 8 10 8 11 9 11 9 7 15 7 15 11 16 11 16 10 17 10 17 8 18 8 18 7 20 7 20 8 21 8 21 11 22 11 22 14 21 14 21 15 20 15 20 16"/><polygon points="18 5 17 5 17 3 18 3 18 2 20 2 20 3 21 3 21 5 20 5 20 6 18 6 18 5"/>
        </svg>
        <p
          class="max-w-[32rem] uppercase font-silkscreen text-6xl font-semibold leading-relaxed"
        >
          community
        </p>
        <p class="max-w-[32rem] font-whyte text-l leading-relaxed">
          The heart of Purdue Hackers is our <a
          href="https://discord.gg/ncJ3xmhV85"
          target="_blank"
          class="highlight hover:text-[var(--color-secondary)] underline transition-colors duration-300"
          >Discord</a
        > community with 3000+ people. Share what you've made in <span class="highlight font-inconsolata">#ship</span>, chat about rainbows in <span class="highlight font-inconsolata">#lounge</span>, and get technical help in <span class="highlight font-inconsolata">#code</span>. Find people who push you to be your best, and make awesome things together.
        </p>
        <br />
        <p class="max-w-[32rem] font-whyte text-l leading-relaxed">
          We have lots of cool community projects, including <a
            href="https://passports.purduehackers.com/"
            target="_blank"
            class="highlight hover:text-[var(--color-secondary)] underline transition-colors duration-300 whitespace-nowrap"
            >custom hacker passports</a
          >, weekly acrylic badges designed and cut by members, <a
            href="https://sig.horse/"
            target="_blank"
            class="highlight hover:text-[var(--color-secondary)] underline transition-colors duration-300 whitespace-nowrap"
            >a journal of projects done over summer</a
          >, and more.
        </p>
        <br />
        <p class="max-w-[32rem] font-whyte text-l leading-relaxed">
          Want to see what community projects need taking up on? <br/> Check out our <a
            href="https://shelter.purduehackers.com/"
            target="_blank"
            class="highlight hover:text-[var(--color-secondary)] underline transition-colors duration-300 whitespace-nowrap"
            >Shelter</a
          > or our <a
            href="https://discord.gg/ncJ3xmhV85"
            target="_blank"
            class="highlight hover:text-[var(--color-secondary)] underline transition-colors duration-300"
            >Discord</a
          >!
        </p>
      </div>

      <!-- 4 -->
      <div class="mb-72 relative">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          class="w-8 h-8 mx-auto text-[var(--color-secondary)]"
          fill="currentColor"
        >
          <polygon
            points="23 18 23 20 21 20 21 21 20 21 20 23 18 23 18 21 17 21 17 20 15 20 15 18 17 18 17 17 18 17 18 15 20 15 20 17 21 17 21 18 23 18"
          ></polygon><polygon
            points="23 4 23 6 21 6 21 7 20 7 20 9 18 9 18 7 17 7 17 6 15 6 15 4 17 4 17 3 18 3 18 1 20 1 20 3 21 3 21 4 23 4"
          ></polygon><polygon
            points="17 11 17 13 15 13 15 14 13 14 13 15 12 15 12 16 11 16 11 18 10 18 10 20 8 20 8 18 7 18 7 16 6 16 6 15 5 15 5 14 3 14 3 13 1 13 1 11 3 11 3 10 5 10 5 9 6 9 6 8 7 8 7 6 8 6 8 4 10 4 10 6 11 6 11 8 12 8 12 9 13 9 13 10 15 10 15 11 17 11"
          ></polygon>
        </svg>
        <p
          class="max-w-[32rem] uppercase font-silkscreen text-6xl font-semibold leading-relaxed"
        >
          the show
        </p>
        <p class="max-w-[32rem] font-whyte text-l leading-relaxed">
          At the end-of-semester, we hold the Show, an exhibit where our
          community comes together to share projects made throughout the
          semester at Hack Night and beyond.
        </p>
        <br />
        <p class="font-inconsolata text-xl font-semibold uppercase">
          ???????: Fall 2026 Show
        </p>
        <a
          href="https://spill.purduehackers.com/"
          target="_blank"
          class="font-inconsolata text-xl font-semibold uppercase underline hover:text-[var(--color-secondary)] transition-colors duration-300"
          >spill ≋: Fall 2025 Show</a
        >
        <br />
        <a
          href="https://burst.purduehackers.com/"
          target="_blank"
          class="font-inconsolata text-xl font-semibold uppercase underline hover:text-[var(--color-secondary)] transition-colors duration-300"
          >BURST ✷: Fall 2024 Show</a
        >
      </div>
    </section>

    <section
      class="relative min-h-screen w-full bg-cover bg-center bg-no-repeat flex flex-col justify-end"
      style="background-image: url('/pic.png'); image-rendering: pixelated;"
    >
      <div
        class="absolute top-0 left-0 right-0 h-[256px] pointer-events-none"
        style={`background-image: url('${footerDitherSvg}'); background-size: 8px 256px; background-repeat: repeat-x; image-rendering: pixelated; image-rendering: crisp-edges;`}
        aria-hidden="true"
      >
      </div>
      <div class="absolute inset-0 z-[1] w-full h-full" aria-hidden="true">
        <div
          id="pixel-blast-root"
          class="w-full h-full"
          aria-label="PixelBlast interactive dither overlay"
        >
        </div>
      </div>
      <div
        class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent pointer-events-none"
        aria-hidden="true"
      >
      </div>
      <div
        class="relative z-10 flex flex-wrap items-end justify-between gap-8 px-8 py-8 md:px-12 md:py-12 pointer-events-none"
      >
        <div class="font-inconsolata text-[var(--color-bg)] text-left">
          <p class="text-sm md:text-base uppercase tracking-wide opacity-90">
            2026
          </p>
        </div>
        <div
          class="flex gap-12 md:gap-16 font-inconsolata text-[var(--color-bg)]"
        >
          <div class="text-right">
            <p
              class="text-sm md:text-base uppercase tracking-wide opacity-90 text-[var(--color-bg)]"
            >
              more from us
            </p>
            <p class="mt-2 text-lg md:text-xl text-[var(--color-bg)]">
              <a
                href="https://sig.horse/"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >SIGHORSE</a
              >
              <br />
              <a
                href="https://passports.purduehackers.com/"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >Passports</a
              >
              <br />
              <a
                href="https://shelter.purduehackers.com/"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >Shelter</a
              >
              <br />
              <a
                href="https://commit.purduehackers.com/"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >Commit Overflow</a
              >
              <br />
              <a
                href="https://ring.purduehackers.com/"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >Webring</a
              >
            </p>
          </div>
          <div class="text-right">
            <p
              class="text-sm md:text-base uppercase tracking-wide opacity-90 text-[var(--color-bg)]"
            >
              find us on
            </p>
            <p class="mt-2 text-lg md:text-xl text-[var(--color-bg)]">
              <a
                href="https://discord.gg/purduehackers"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >Discord</a
              >
              <br />
              <a
                href="https://github.com/purduehackers"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >GitHub</a
              >
              <br />
              <a
                href="https://www.instagram.com/purduehackers/"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >Instagram</a
              >
              <br />
              <a
                href="https://www.linkedin.com/company/purdue-hackers/"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >LinkedIn</a
              >
              <br />
              <a
                href="https://x.com/purduehackers/"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >Twitter</a
              >
              <br />
              <a
                href="https://www.youtube.com/@PurdueHackers/"
                target="_blank"
                class="footer-overlay-link underline hover:text-[var(--color-secondary)] transition-colors font-semibold"
                >YouTube</a
              >
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
  <script>
    import { initPixelBlast } from '../scripts/PixelBlast';
    function init() {
      const root = document.getElementById('pixel-blast-root');
      if (root) {
        const cleanup = initPixelBlast(root, {
          variant: 'square',
          pixelSize: 2,
          color: '#000000',
          patternScale: 2.5,
          patternDensity: 1.5,
          pixelSizeJitter: 0,
          enableRipples: true,
          rippleSpeed: 0.3,
          rippleThickness: 0.15,
          rippleIntensityScale: 2,
          liquid: false,
          liquidStrength: 0.12,
          liquidRadius: 1.2,
          liquidWobbleSpeed: 5,
          speed: 0.5,
          edgeFade: 0,
          transparent: true,
        });
        document.addEventListener('astro:before-swap', cleanup, { once: true });
      }
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</BaseLayout>
